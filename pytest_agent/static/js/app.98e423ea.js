(function(e){function t(t){for(var s,r,c=t[0],l=t[1],o=t[2],d=0,f=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,o||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},a={app:0},i=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/static/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-app-bar",{attrs:{app:"",color:"black",dark:""}},[s("div",{staticClass:"d-flex align-center"},[s("v-img",{staticClass:"shrink mr-2",attrs:{contain:"",src:n("cf05"),transition:"scale-transition",width:"40"}})],1),s("v-spacer"),s("v-btn",{attrs:{title:"click to select agent url"},on:{click:function(t){e.isSelectAgentDialogDisplayed=!0}}},[e._v(" "+e._s(e.selectAgentMessage)+" ")])],1),s("select-agent-dialog",{model:{value:e.isSelectAgentDialogDisplayed,callback:function(t){e.isSelectAgentDialogDisplayed=t},expression:"isSelectAgentDialogDisplayed"}}),s("v-main",[s("router-view")],1)],1)},i=[],r=n("5530"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500"},model:{value:e.isDialogDisplayed,callback:function(t){e.isDialogDisplayed=t},expression:"isDialogDisplayed"}},[n("v-card",[n("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Opening from the bottom")]),n("v-card-text",{staticStyle:{"padding-top":"1em"}},[e.agentURLs.length>0?n("div",[n("p",[e._v("Use an existing agent")]),n("v-select",{attrs:{label:"Select an existing agent",items:e.agentURLs,"return-object":""},on:{change:e.useAgent}})],1):e._e(),n("form",{on:{submit:function(t){return t.preventDefault(),e.addAgent(e.newAgentURL)}}},[n("p",[e.agentURLs.length>0?n("strong",[e._v("OR")]):e._e(),e._v(" Connect to a new agent ")]),n("v-row",[n("v-text-field",{attrs:{label:"Type a new agent URL",required:""},model:{value:e.newAgentURL,callback:function(t){e.newAgentURL=t},expression:"newAgentURL"}}),n("v-btn",{attrs:{color:"primary",type:"submit",icon:""}},[n("v-icon",[e._v("mdi-plus")])],1)],1)],1)]),n("v-card-actions",{staticClass:"justify-end"},[n("v-btn",{attrs:{text:"",color:"red"},on:{click:function(t){return e.disconnect()}}},[e._v("Disconnect")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.isDialogDisplayed=!1}}},[e._v("Close")])],1)],1)],1)},l=[],o=n("2f62"),u={data:function(){return{isDialogDisplayed:!1,newAgentURL:null}},computed:Object(r["a"])({},Object(o["b"])("agent",["agentURLs"])),props:{value:{type:Boolean,default:!1}},watch:{value:{immediate:!0,handler:function(e){this.isDialogDisplayed=e}},isDialogDisplayed:{immediate:!0,handler:function(e){this.$emit("input",e)}}},methods:{addAgent:function(){this.$store.dispatch("agent/addAgent",this.newAgentURL),this.isDialogDisplayed=!1},useAgent:function(e){this.$store.dispatch("agent/useAgent",e),this.isDialogDisplayed=!1},disconnect:function(){this.$store.dispatch("agent/useAgent",null),this.isDialogDisplayed=!1}}},d=u,f=n("2877"),p=n("6544"),m=n.n(p),g=n("8336"),v=n("b0af"),h=n("99d9"),b=n("169a"),y=n("132d"),x=n("0fd9"),_=n("b974"),A=n("8654"),k=n("71d9"),T=Object(f["a"])(d,c,l,!1,null,null,null),w=T.exports;m()(T,{VBtn:g["a"],VCard:v["a"],VCardActions:h["a"],VCardText:h["b"],VDialog:b["a"],VIcon:y["a"],VRow:x["a"],VSelect:_["a"],VTextField:A["a"],VToolbar:k["a"]});var O={name:"App",components:{SelectAgentDialog:w},data:function(){return{isSelectAgentDialogDisplayed:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])("agent",["selectedAgent"])),{},{selectAgentMessage:function(){return this.selectedAgent?this.selectedAgent:"Connect to a pytest agent"}})},D=O,j=n("7496"),R=n("40dc"),S=n("adda"),M=n("f6c4"),V=n("2fa4"),C=Object(f["a"])(D,a,i,!1,null,null,null),L=C.exports;m()(C,{VApp:j["a"],VAppBar:R["a"],VBtn:g["a"],VImg:S["a"],VMain:M["a"],VSpacer:V["a"]});var U=n("8c4f"),I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",[n("v-container",[n("h2",[e._v("Welcome home")]),n("v-text-field",{attrs:{label:"Tipe a search here to filter tests"}}),n("test-list",{attrs:{modules:e.testModules},model:{value:e.selectedTests,callback:function(t){e.selectedTests=t},expression:"selectedTests"}})],1),n("div",{staticStyle:{position:"fixed",display:"flex",left:"0",right:"0",bottom:"0","background-color":"rgba(0, 0, 0, 0.1)",padding:"8px 2em"}},[n("status-bar",{attrs:{metrics:e.testMetrics}}),n("v-spacer"),e._v(" "+e._s(e.selectedTestsCounter)+" test(s) selected "),n("v-icon",{attrs:{color:"green",title:"Refresh test results"},on:{click:function(t){return e.refreshResults()}}},[e._v(" mdi-refresh ")]),e.selectedTestsCounter>0?n("v-icon",{attrs:{color:"green",title:"Run selected tests"},on:{click:function(t){return e.runSelectedTests()}}},[e._v(" mdi-play-circle ")]):e._e(),n("v-icon",{attrs:{color:"orange",title:"Select failed tests"},on:{click:function(t){return e.selectFailed()}}},[e._v(" mdi-alert-circle ")]),n("v-icon",{attrs:{color:"blue",title:"Select all tests"},on:{click:function(t){return e.selectAll()}}},[e._v(" mdi-checkbox-multiple-marked-outline ")]),n("v-icon",{attrs:{color:"accent",title:"Deselect all tests"},on:{click:function(t){return e.deselectAll()}}},[e._v(" mdi-close-circle ")]),n("v-icon",{attrs:{color:"red",title:"Clear test results"},on:{click:function(t){return e.dismissResults()}}},[e._v(" mdi-delete ")])],1)],1)},$=[],P=n("b85c"),E=(n("caad"),n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.metrics,(function(e,t){return n("span",{key:t,staticClass:"statusbar-icon"},[n("status-icon",{attrs:{status:t,counter:e}})],1)})),0)}),B=[],N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{class:e.statusColor+"--text",attrs:{title:e.title}},[n("v-icon",{attrs:{color:e.statusColor}},[e._v(e._s(e.statusIcon))]),e._v(" "+e._s(e.counter)+" ")],1)},F=[],J=(n("a9e3"),{"n/a":"orange",succeed:"green",failed:"red",running:"blue",pending:"teal",total:"black"}),H={"n/a":"mdi-cancel",succeed:"mdi-check",failed:"mdi-alert-circle",running:"mdi-run-fast",pending:"mdi-sleep",total:"mdi-magnify"},q={props:{status:{type:String,default:"n/a"},counter:{type:Number,default:null}},computed:{statusColor:function(){return J[this.status]},statusIcon:function(){return H[this.status]},title:function(){return(this.counter?this.counter+" ":"")+this.status}}},G=q,W=Object(f["a"])(G,N,F,!1,null,null,null),X=W.exports;m()(W,{VIcon:y["a"]});var Y={components:{StatusIcon:X},props:{metrics:{type:Object,default:function(){return{}}}}},z=Y,K=(n("5e67"),Object(f["a"])(z,E,B,!1,null,"bf2fb7a4",null)),Q=K.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-menu",{attrs:{"position-x":e.contextMenu.x,"position-y":e.contextMenu.y,absolute:"","offset-y":""},model:{value:e.isContextMenuDisplayed,callback:function(t){e.isContextMenuDisplayed=t},expression:"isContextMenuDisplayed"}},[n("v-list",[n("v-list-item",{on:{click:function(t){return e.selectAllModuleTests()}}},[n("v-list-item-title",[e._v(" Select All ")]),n("v-list-item-action",[n("v-icon",{staticStyle:{"margin-left":"0.5em"},attrs:{color:"blue"}},[e._v(" mdi-checkbox-multiple-marked-outline ")])],1)],1),n("v-list-item",{on:{click:function(t){return e.deselectAllModuleTests()}}},[n("v-list-item-title",[e._v(" Deselect All ")]),n("v-list-item-action",[n("v-icon",{staticStyle:{"margin-left":"0.5em"},attrs:{color:"orange",right:""}},[e._v(" mdi-close-circle ")])],1)],1)],1)],1),n("v-expansion-panels",e._l(e.modules,(function(t){return n("v-expansion-panel",{key:t.modulename},[n("v-expansion-panel-header",{on:{contextmenu:function(n){return n.preventDefault(),e.showContextMenu(t,n)}},scopedSlots:e._u([{key:"actions",fn:function(){return e._l(t.statuses,(function(e){return n("StatusIcon",{key:e,attrs:{status:e}})}))},proxy:!0}],null,!0)},[e._v(" "+e._s(t.modulename)+" ")]),n("v-expansion-panel-content",[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{attrs:{color:"primary"}},e._l(t.tests,(function(t){return n("v-list-item",{key:t.fullname,on:{click:function(n){return e.emitClick(t.fullname)}}},[n("v-checkbox",{attrs:{value:t.fullname},on:{click:function(e){e.stopPropagation()}},model:{value:e.selectedTests,callback:function(t){e.selectedTests=t},expression:"selectedTests"}}),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.funcname)}})],1),n("v-list-item-icon",[n("i",{staticStyle:{"margin-right":"0.5em"}},[e._v(" "+e._s(t.refresh_date)+" ")]),n("StatusIcon",{attrs:{status:t.status}})],1)],1)})),1)],1)],1)],1)})),1)],1)},ee=[],te={components:{StatusIcon:X},data:function(){return{selectedTests:[],isContextMenuDisplayed:!1,contextMenu:{x:0,y:0,testModule:null}}},props:{tests:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}},modules:{type:Object,default:function(){return{}}}},watch:{selectedTests:{handler:function(e){this.$emit("input",e)}},value:function(e){this.selectedTests=e}},methods:{emitClick:function(e){this.$emit("click",e)},showContextMenu:function(e,t){this.isContextMenuDisplayed=!0,this.contextMenu.x=t.clientX,this.contextMenu.y=t.clientY,this.contextMenu.testModule=e},selectAllModuleTests:function(){console.log(this.contextMenu.testModule),console.log(this.selectedTests);var e,t=Object(P["a"])(this.contextMenu.testModule.tests);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.selectedTests.includes(n.fullname)||this.selectedTests.push(n.fullname)}}catch(s){t.e(s)}finally{t.f()}}}},ne=te,se=n("ac7c"),ae=n("cd55"),ie=n("49e2"),re=n("c865"),ce=n("0393"),le=n("8860"),oe=n("da13"),ue=n("1800"),de=n("5d23"),fe=n("1baa"),pe=n("34c3"),me=n("e449"),ge=Object(f["a"])(ne,Z,ee,!1,null,null,null),ve=ge.exports;m()(ge,{VCheckbox:se["a"],VExpansionPanel:ae["a"],VExpansionPanelContent:ie["a"],VExpansionPanelHeader:re["a"],VExpansionPanels:ce["a"],VIcon:y["a"],VList:le["a"],VListItem:oe["a"],VListItemAction:ue["a"],VListItemContent:de["a"],VListItemGroup:fe["a"],VListItemIcon:pe["a"],VListItemTitle:de["b"],VMenu:me["a"]});var he={name:"Home",components:{StatusBar:Q,TestList:ve},data:function(){return{selectedTests:[]}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["c"])("agent",["tests"])),Object(o["b"])("agent",["testMetrics","testModules"])),{},{selectedTestsCounter:function(){return this.selectedTests.length}}),methods:{selectTest:function(e){this.selectedTests.includes(e)||this.selectedTests.push(e)},runSelectedTests:function(){var e=this;this.$store.dispatch("agent/runTests",this.selectedTests).then((function(){return e.deselectAll()}))},selectAll:function(){var e,t=Object(P["a"])(this.tests);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.selectTest(n.fullname)}}catch(s){t.e(s)}finally{t.f()}},selectFailed:function(){var e,t=Object(P["a"])(this.tests);try{for(t.s();!(e=t.n()).done;){var n=e.value;"failed"===n.status&&this.selectTest(n.fullname)}}catch(s){t.e(s)}finally{t.f()}},deselectAll:function(){this.selectedTests=[]},refreshResults:function(){this.$store.dispatch("agent/refreshTestResults")}}},be=he,ye=(n("80d8"),n("a523")),xe=Object(f["a"])(be,I,$,!1,null,"323527bf",null),_e=xe.exports;m()(xe,{VContainer:ye["a"],VIcon:y["a"],VSpacer:V["a"],VTextField:A["a"]}),s["a"].use(U["a"]);var Ae=[{path:"/",name:"Home",component:_e}],ke=new U["a"]({mode:"history",base:"/static/",routes:Ae}),Te=ke,we=n("f309");s["a"].use(we["a"]);var Oe=new we["a"]({}),De=n("1da1"),je=(n("96cf"),n("d81d"),n("07ac"),n("e9c4"),n("bc3a")),Re=n.n(je),Se=Re.a.create();function Me(){var e;try{if(e=JSON.parse(localStorage.getItem("agentURLs")),!e)return console.log("No agents reloaded"),[]}catch(t){return console.log("No agents reloaded"),[]}return console.log("agents reloaded",e),e}function Ve(e){var t,n={total:0},s=Object(P["a"])(e);try{for(s.s();!(t=s.n()).done;){var a=t.value;n[a.status]||(n[a.status]=0),n[a.status]+=1,n.total+=1}}catch(i){s.e(i)}finally{s.f()}return n}function Ce(e){var t=Ve(e),n=[];return t.failed>0?n.push("failed"):t.succeed===t.total&&n.push("succeed"),t.running>0?n.push("running"):t.pending>0&&n.push("pending"),0===n.length&&n.push("n/a"),n}var Le={namespaced:!0,state:{selectedAgent:null,agentURLs:Me(),tests:[]},getters:{agentURLs:function(e){return e.agentURLs},isConnected:function(e){return!!e.selectedAgent},testMetrics:function(e){return Ve(e.tests)},testModules:function(e){var t={};console.log(e.tests);var n,s=Object(P["a"])(e.tests);try{for(s.s();!(n=s.n()).done;){var a=n.value;a.modulename in t||(t[a.modulename]={modulename:a.modulename,tests:[]}),t[a.modulename].tests.push(a)}}catch(i){s.e(i)}finally{s.f()}return Object.values(t).map((function(e){return e.statuses=Ce(e.tests)})),t}},mutations:{addAgent:function(e,t){e.agentURLs.push(t),console.log(e.agentURLs.map((function(e){return e}))),localStorage.setItem("agentURLs",JSON.stringify(e.agentURLs))},useAgent:function(e,t){e.selectedAgent=t,Se.defaults.baseURL=t,e.tests=[]},setTests:function(e,t){e.tests=t}},actions:{refreshTestResults:function(e){return Object(De["a"])(regeneratorRuntime.mark((function t(){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Se.get("/tests/summary");case 3:s=t.sent,n("setTests",s.data);case 5:case"end":return t.stop()}}),t)})))()},addAgent:function(e,t){return Object(De["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,a=e.dispatch,s("addAgent",t),n.next=4,a("useAgent",t);case 4:case"end":return n.stop()}}),n)})))()},useAgent:function(e,t){return Object(De["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(s=e.commit,a=e.dispatch,s("useAgent",t),!t){n.next=5;break}return n.next=5,a("refreshTestResults");case 5:case"end":return n.stop()}}),n)})))()},runTests:function(e,t){return Object(De["a"])(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return s=e.commit,n.next=3,Se.post("/tests/run",t);case 3:a=n.sent,s("setTests",a.data);case 5:case"end":return n.stop()}}),n)})))()}}};s["a"].use(o["a"]);var Ue=new o["a"].Store({modules:{agent:Le}});s["a"].config.productionTip=!1,new s["a"]({router:Te,vuetify:Oe,store:Ue,render:function(e){return e(L)}}).$mount("#app")},"5e67":function(e,t,n){"use strict";n("8809")},"80d1":function(e,t,n){},"80d8":function(e,t,n){"use strict";n("80d1")},8809:function(e,t,n){},cf05:function(e,t,n){e.exports=n.p+"img/logo.c0a818de.png"}});
//# sourceMappingURL=app.98e423ea.js.map